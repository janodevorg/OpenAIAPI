// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation
import Get
import HTTPHeaders
import URLQueryEncoder

extension Paths.Organization.Usage {
    public var completions: Completions {
        Completions(path: path + "/completions")
    }

    public struct Completions {
        /// Path: `/organization/usage/completions`
        public let path: String

        /// Get completions usage details for the organization.
        public func get(parameters: GetParameters) -> Request<OpenAIAPI.UsageResponse> {
            Request(path: path, method: "GET", query: parameters.asQuery, id: "usage-completions")
        }

        public struct GetParameters {
            public var startTime: Int
            public var endTime: Int?
            public var bucketWidth: BucketWidth?
            public var projectIDs: [String]?
            public var userIDs: [String]?
            public var apiKeyIDs: [String]?
            public var models: [String]?
            public var isBatch: Bool?
            public var groupBy: [GroupBy]?
            public var limit: Int?
            public var page: String?

            public enum BucketWidth: String, Codable, CaseIterable {
                case _1m = "1m"
                case _1h = "1h"
                case _1d = "1d"
            }

            public enum GroupBy: String, Codable, CaseIterable {
                case projectID = "project_id"
                case userID = "user_id"
                case apiKeyID = "api_key_id"
                case model
                case batch
            }

            public init(startTime: Int, endTime: Int? = nil, bucketWidth: BucketWidth? = nil, projectIDs: [String]? = nil, userIDs: [String]? = nil, apiKeyIDs: [String]? = nil, models: [String]? = nil, isBatch: Bool? = nil, groupBy: [GroupBy]? = nil, limit: Int? = nil, page: String? = nil) {
                self.startTime = startTime
                self.endTime = endTime
                self.bucketWidth = bucketWidth
                self.projectIDs = projectIDs
                self.userIDs = userIDs
                self.apiKeyIDs = apiKeyIDs
                self.models = models
                self.isBatch = isBatch
                self.groupBy = groupBy
                self.limit = limit
                self.page = page
            }

            public var asQuery: [(String, String?)] {
                let encoder = URLQueryEncoder()
                encoder.encode(startTime, forKey: "start_time")
                encoder.encode(endTime, forKey: "end_time")
                encoder.encode(bucketWidth, forKey: "bucket_width")
                encoder.encode(projectIDs, forKey: "project_ids")
                encoder.encode(userIDs, forKey: "user_ids")
                encoder.encode(apiKeyIDs, forKey: "api_key_ids")
                encoder.encode(models, forKey: "models")
                encoder.encode(isBatch, forKey: "batch")
                encoder.encode(groupBy, forKey: "group_by")
                encoder.encode(limit, forKey: "limit")
                encoder.encode(page, forKey: "page")
                return encoder.items
            }
        }
    }
}
