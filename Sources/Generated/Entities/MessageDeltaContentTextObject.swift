// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation

/// Text
///
/// The text content that is part of a message.
public struct MessageDeltaContentTextObject: Codable {
    /// The index of the content part in the message.
    public var index: Int
    /// Always `text`.
    public var type: `Type`
    public var text: Text?

    /// Always `text`.
    public enum `Type`: String, Codable, CaseIterable {
        case text
    }

    public struct Text: Codable {
        /// The data that makes up the text.
        public var value: String?
        public var annotations: [Annotation]?

        public enum Annotation: Codable {
            case messageDeltaContentTextAnnotationsFileCitationObject(MessageDeltaContentTextAnnotationsFileCitationObject)
            case messageDeltaContentTextAnnotationsFilePathObject(MessageDeltaContentTextAnnotationsFilePathObject)

            public init(from decoder: Decoder) throws {
                let container = try decoder.singleValueContainer()
                if let value = try? container.decode(MessageDeltaContentTextAnnotationsFileCitationObject.self) {
                    self = .messageDeltaContentTextAnnotationsFileCitationObject(value)
                } else if let value = try? container.decode(MessageDeltaContentTextAnnotationsFilePathObject.self) {
                    self = .messageDeltaContentTextAnnotationsFilePathObject(value)
                } else {
                    throw DecodingError.dataCorruptedError(
                        in: container,
                        debugDescription: "Data could not be decoded as any of the expected types (MessageDeltaContentTextAnnotationsFileCitationObject, MessageDeltaContentTextAnnotationsFilePathObject)."
                    )
                }
            }

            public func encode(to encoder: Encoder) throws {
                var container = encoder.singleValueContainer()
                switch self {
                case .messageDeltaContentTextAnnotationsFileCitationObject(let value): try container.encode(value)
                case .messageDeltaContentTextAnnotationsFilePathObject(let value): try container.encode(value)
                }
            }
        }

        public init(value: String? = nil, annotations: [Annotation]? = nil) {
            self.value = value
            self.annotations = annotations
        }

        public init(from decoder: Decoder) throws {
            let values = try decoder.container(keyedBy: StringCodingKey.self)
            self.value = try values.decodeIfPresent(String.self, forKey: "value")
            self.annotations = try values.decodeIfPresent([Annotation].self, forKey: "annotations")
        }

        public func encode(to encoder: Encoder) throws {
            var values = encoder.container(keyedBy: StringCodingKey.self)
            try values.encodeIfPresent(value, forKey: "value")
            try values.encodeIfPresent(annotations, forKey: "annotations")
        }
    }

    public init(index: Int, type: `Type`, text: Text? = nil) {
        self.index = index
        self.type = type
        self.text = text
    }

    public init(from decoder: Decoder) throws {
        let values = try decoder.container(keyedBy: StringCodingKey.self)
        self.index = try values.decode(Int.self, forKey: "index")
        self.type = try values.decode(`Type`.self, forKey: "type")
        self.text = try values.decodeIfPresent(Text.self, forKey: "text")
    }

    public func encode(to encoder: Encoder) throws {
        var values = encoder.container(keyedBy: StringCodingKey.self)
        try values.encode(index, forKey: "index")
        try values.encode(type, forKey: "type")
        try values.encodeIfPresent(text, forKey: "text")
    }
}
