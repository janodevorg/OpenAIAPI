// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation

/// Thread Truncation Controls
///
/// Controls for how a thread will be truncated prior to the run. Use this to control the intial context window of the run.
public struct TruncationObject: Codable {
    /// The truncation strategy to use for the thread. The default is `auto`. If set to `last_messages`, the thread will be truncated to the n most recent messages in the thread. When set to `auto`, messages in the middle of the thread will be dropped to fit the context length of the model, `max_prompt_tokens`.
    public var type: `Type`
    /// The number of most recent messages from the thread when constructing the context for the run.
    public var lastMessages: Int?

    /// The truncation strategy to use for the thread. The default is `auto`. If set to `last_messages`, the thread will be truncated to the n most recent messages in the thread. When set to `auto`, messages in the middle of the thread will be dropped to fit the context length of the model, `max_prompt_tokens`.
    public enum `Type`: String, Codable, CaseIterable {
        case auto
        case lastMessages = "last_messages"
    }

    public init(type: `Type`, lastMessages: Int? = nil) {
        self.type = type
        self.lastMessages = lastMessages
    }

    public init(from decoder: Decoder) throws {
        let values = try decoder.container(keyedBy: StringCodingKey.self)
        self.type = try values.decode(`Type`.self, forKey: "type")
        self.lastMessages = try values.decodeIfPresent(Int.self, forKey: "last_messages")
    }

    public func encode(to encoder: Encoder) throws {
        var values = encoder.container(keyedBy: StringCodingKey.self)
        try values.encode(type, forKey: "type")
        try values.encodeIfPresent(lastMessages, forKey: "last_messages")
    }
}
